seed: 42
device: auto

dataset:
  name: WN18RR
  source: hf
  hf_name: VLyb/WN18RR
  filtered_eval: true

data:
  neg_size: 64
  train_bs: 1024
  test_bs: 128
  num_workers: 4

  # ============================================================================
  # OPTIONAL: Dataset Sampling (for faster experimentation)
  # ============================================================================
  # Uncomment to use a subset for faster training/validation.
  # Sampling preserves full vocabulary and filters evaluation to training entities.
  #
  # Speed (FB15k-237): Full=8-16h, 10%=1h, 10%+20%valid=40min per 100 epochs
  #
  # Choose ONE strategy:
#  sample_ratio: 0.1              # 10% of training (272k -> 27k)
#  sample_valid_ratio: 0.2        # 20% of validation for faster epochs
  # max_entities: 5000             # Top 5000 entities by degree
  # max_triples: 50000             # Exactly 50k training triples
#  sample_seed: 42                # Reproducibility


model:
  name: PairRE
  base_dim: 80
  gamma: 12.0
  use_mi: true
  mi_lambda: 0.01

med:
  enabled: true
  dims: [10, 20, 40, 80]
  submodels_per_step: 3

optim:
  name: Adam
  lr: 0.0005
  weight_decay: 0.0
  betas: [0.9, 0.999]
  grad_clip: 1.0

sched:
  name: linear
  warmup_steps: 1000
  total_steps: 0

train:
  epochs: 100
  log_every: 100
  eval_every: 5000
  save_every: 10000
  out_dir: ./workdir/runs/wn18rr/pairre/med_mi_dims_10_20_40_80
  save_best_metric: MRR
